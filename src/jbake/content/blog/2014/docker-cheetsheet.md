title=Шпаргалка Docker
date=2014-10-22
type=post
tags=blog
status=draft
~~~~~~

### Создание образа

* `docker pull ОБРАЗ` - загружает образ из Docker Hub (аналог GitHub для Docker)

* `docker build ПУТЬ | URL` - создает образ с помощью Dockerfile
    Параметры
    * `-t` | `--tag=""` - помечает созданый образ переданный названием (и, тэгом, если он будет передан)
    * `--rm` - Удаляет промежуточные контейнеры после успешного билда (по умолчанию == true)

### Управление образами

* `docker rmi` - Удаляет образ, образ не может быть удален, если существуют контейнеры (даже незапущенные), которые основаны
на данном образе
    Параметры
    * `-f` - позволяет удалить образ даже если на нём основаны контейнеры

* `docker images` - Отображает список всех существующих образов
    Параметры:
    * `-a` | `--all` - отображает все образы (по умолчанию не отображает промежуточные контейнеры)
    * `-q` - отображает только id образов, вместо таблицы

### Запуск и остановка контейнеров

* `docker run ОБРАЗ [КОМАНДА + АРГУМЕНТЫ]` - Запускает выбранный образ в новом контейнере
    Параметры
    * `-d` | `--detach` - запускает контейнер в фоновом режиме и выводит только id свежесозданного контейнера. (по умолчанию == `false`)
    * `-i` | `--interactive` - запускает контейнер в интерактивном режиме (оставляет STDIN открытым, даже если контейнер запущен в неприкрепленном режиме)
    * `-t` | `--tty` - запускает псевдотерминал, часто используется с `-i`
    * `-p` | `--publish=[]` - пробрасывает порты контейнера в хост. Формат: ip:hostPort:containerPort | ip::containerPort | hostPort:containerPort | containerPort
    * `-e` | `--env=[]` - пробрасывает переменные окружения внутрь контейнера.
    * `-v` | `--volume=[]` - пробрасывает директорию файловой системы внутрь контейнера

* `docker stop КОНТЕЙНЕР` - останавливает контейнер, передавая внутрь SIGTERM, а по истечении таймаута - SIGKILL
* `docker start КОНТЕЙНЕР` - запускает остановленный контейнер.
    Параметры
    * `-i` | `--interactive` - аналогично docker run -i
* `docker restart КОНТЕЙНЕР` - Презапускает выбранный контейнер с помощью docker stop и docker start
* `docker kill КОНТЕЙНЕР` - Убивает контейнер, передавая внутрь SIGKILL

### Управление контейнерами

* `docker port КОНТЕЙНЕР` - отображает маппинг портов между хостом и контейнером
* `docker ps` - отображает список запущенных контейнеров
    Параметры
    * `-a` | `--all=(true|false)` - отображать ли все контейнеры. По умолчанию == `false`, т.е. отображаются только запущенные контейнеры
    * `-q` - отображает только ID контейнеров вместо таблицы
* `docker rm КОНТЕЙНЕР` - удаляет контейнер. По умолчанию можно удалить только запущенный контейнер.
    Параметры
    * `-f` | `--force=(true|false)` - позволяет удалить запущенный контейнер. Используется передача SIGKILL внутрь.
* `docker diff` - отображает изменения относительно образа.

### Синтаксис Dockerfile

-----------------------------
Образ - image
Контейнер - container